(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{173:function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),a=(t(232),t(46)),o=t.n(a),c=t(8),s=t.n(c),u=t(204),h=.08,d=function(e){function n(n){var t;return(t=e.call(this,n)||this).onDocumentKeyDown=function(e){var n=t.keyHandler[e.code];n&&n(e)},t.tapHandler=function(e){var n=e.center,r=n.x,i=n.y,a=new u.j;a.x=r/t.renderer.domElement.clientWidth*2-1,a.y=-i/t.renderer.domElement.clientHeight*2+1,t.raycaster.setFromCamera(a,t.camera);var o=t.raycaster.intersectObjects(t.group.children);if(o.length>0)return t.handleObjectTapped(o[0].object),!0},t.animate=function(){requestAnimationFrame(t.animate),t.updateCameraPosition(),t.renderer.render(t.scene,t.camera)},t.updateCameraPosition=function(){t.cameraSpeedX*=1-h,t.cameraSpeedY*=1-h,t.cameraSpeedZ*=1-h,t.cameraPosX+=t.cameraSpeedX,t.cameraPosY+=t.cameraSpeedY,t.cameraPosZ+=t.cameraSpeedZ,t.camera.position.set(t.cameraPosX,t.cameraPosY,t.cameraPosZ)},t.onDocumentResize=function(){var e=window,n=e.innerWidth,r=e.innerHeight;t.renderer.setSize(n,r),t.camera.aspect=n/r,t.camera.updateProjectionMatrix()},t.cameraPosX=0,t.cameraPosY=0,t.cameraPosZ=10,t.cameraSpeedX=0,t.cameraSpeedY=0,t.cameraSpeedZ=0,t.raycaster=new u.g,t.position=0,t.meshObjects=[],t.keyHandler={},t.swipeHandler=function(){},t}s()(n,e);var r=n.prototype;return r.componentDidMount=function(){document.body.style.overflow="hidden";var e=window,n=e.innerWidth,r=e.innerHeight;this.renderer=new u.l,document.body.appendChild(this.renderer.domElement),this.scene=new u.h,this.renderer.setSize(n,r);this.far=10,this.camera=new u.f(60,n/r,1,this.far),window.addEventListener("resize",this.onDocumentResize),document.addEventListener("keydown",this.onDocumentKeyDown);var i=t(234),a=new i(this.renderer.domElement);a.get("swipe").set({direction:i.DIRECTION_ALL}),a.on("swipe",this.swipeHandler),a.on("tap",this.tapHandler)},r.render=function(){return null},n}(r.Component),p=t(184),l=t(177),f=10,m=3,v=function(){for(var e=[],n=0;n<2*Math.PI;n+=Math.PI/3){var t=new u.j(Math.cos(n),Math.sin(n));e.push(t)}return e}(),w=function(e,n){var t=f+m*Math.cos(n);return new u.k(t*Math.cos(e),m*Math.sin(n),t*Math.sin(e))},P=function(e,n,t,r){var i=new u.b;i.vertices.push(w(e,n));var a=[new u.j(.5,.5)];v.forEach(function(o){i.vertices.push(w(e+t*o.x,n+r*o.y)),a.push(new u.j(.5-.5*o.x,.5-.5*o.y))});for(var o=1;o<=6;o++){var c=new u.a(0,o,o+1);i.faces.push(c),i.faceVertexUvs[0].push([a[0],a[o],a[o+1]])}return i},y=(P(),function(e,n,t){var r=(new u.i).load(n);r.anisotropy=t.capabilities.getMaxAnisotropy();var i=new u.e({map:r});return new u.d(e,i)}),E=2*Math.PI,g=20,M=.05,x=.01,T=.005,b=50,j=40,H=E/(3*b),D=E/j;f=g,m=4;var S=function(e){function n(){var n;return(n=e.call(this)||this).swipeHandler=function(e){n.speedTheta+=.01*e.overallVelocityX,n.speedPhi-=.01*e.overallVelocityY},n.handlePosts=function(e){var t=.97*H,r=.97*D/Math.sin(Math.PI/3);e.forEach(function(e,i){var a=y(P(e.position.x,e.position.y,t,r),e.image,n.renderer);a.link=e.link,n.thetaGroup.add(a)})},n.setupTorus=function(){n.hexagonCoordMatrix=Object(p.b)(b,j),n.thetaGroup.position.z=-.95*g,n.phiGroup.add(n.thetaGroup),n.scene.add(n.phiGroup),l.a.Post.list().then(function(e){var t=e.data().layout;console.log({layout:t}),t.initialTheta&&(n.positionTheta=t.initialTheta),t.initialPhi&&(n.positionPhi=t.initialPhi);var r=e.data().items;n.handlePosts(r)}),n.animate()},n.handleObjectTapped=function(e){var n=e.link;document.location.href=n},n.updateCameraPosition=function(){n.speedTheta*=1-M,n.speedPhi*=1-M,n.positionPhi+=n.speedPhi,n.positionTheta+=n.speedTheta,n.thetaGroup.rotation.y=n.positionTheta,n.phiGroup.rotation.x=n.positionPhi},n.tapHandler=function(t){e.prototype.tapHandler.call(o()(n),t)||"function"==typeof DeviceMotionEvent.requestPermission&&DeviceMotionEvent.requestPermission().then(function(e){if("granted"===e){window.addEventListener("devicemotion",function(e){this.speedPhi+=.1*e.accelerationIncludingGravity.x},!0)}}).catch(console.error)},n.thetaGroup=new u.c,n.group=n.thetaGroup,n.phiGroup=new u.c,n.cameraPosZ=0,n.positionTheta=4.28,n.positionPhi=34.7,n.speedTheta=.005,n.speedPhi=0,n.keyHandler={ArrowRight:function(){return n.speedTheta-=T},ArrowLeft:function(){return n.speedTheta+=T},ArrowUp:function(){return n.speedPhi-=x},ArrowDown:function(){return n.speedPhi+=x},Space:function(){return console.log(n.positionTheta,n.positionPhi)}},n}return s()(n,e),n.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.camera.position.set(this.cameraPosX,this.cameraPosY,this.cameraPosZ),this.setupTorus()},n}(d),k=function(){return i.a.createElement(S,null)},G=t(196);t(171),n.default=function(){return i.a.createElement("div",null,i.a.createElement(G.Helmet,null,i.a.createElement("title",null,"Joe's Web Page"),i.a.createElement("link",{rel:"apple-touch-icon",href:"/homescreen_icon.png"}),i.a.createElement("link",{rel:"icon",sizes:"192x192",href:"/android_icon.png"})),i.a.createElement(k,null))}},174:function(e,n,t){"use strict";var r=function(){function e(e,n){this.x=e,this.y=n}var n=e.prototype;return n.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.scale=function(e){return this.x*=e,this.y*=e,this},e}();n.a=r},177:function(e,n,t){"use strict";var r=t(185),i=t.n(r),a=t(187),o=t.n(a);n.a=i()({clientId:"joes-blog",host:"",middleware:[o.a],resources:{Post:{list:{path:"/feed-1.json?z="+Math.random()}}}})},178:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var r=function(e,n,t){if(e==n)return 0;var r=n-e;if(e<n){var i=e+t-n;return r<i?r:-i}var a=n+t-e;return-r<a?r:a},i=function(e,n,t){var i=r(e.x,n.x,t.x),a=r(e.y,n.y,t.y),o=Math.sqrt(i*i+a*a);return{magnitude:o,direction:{x:i/o,y:a/o}}}},184:function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return o});t(188),t(192);var r=t(178),i=t(174),a=function(e,n){for(var t=3*e,r=2*Math.PI/t,a=2*Math.PI/n,o=0,c=[],s=0;s<n;s++){c[s]=Array(e);for(var u=o%2==1?1.5*r:0,h=0;h<e;h++)c[s][h]=new i.a(u+3*h*r,s*a);o++}return c},o=function(e,n,t,a,o){var c=function(e,n){for(var t=[],r=0;r<n;r++){t[r]=Array(e);for(var i=0;i<e;i++)t[r][i]=null}return t}(a,o);e.forEach(function(e){var a=e.position,o={magnitude:Number.MAX_SAFE_INTEGER},s=null,u=null;t.forEach(function(e,t){e.forEach(function(e,i){if(!c[t][i]){var h=Object(r.a)(a,e,n);h.magnitude<o.magnitude&&(o=h,s=e,u={row:t,col:i})}})}),s&&(e.position=new i.a(s.x,s.y),c[u.row][u.col]=e)})}},186:function(e,n){}}]);
//# sourceMappingURL=component---src-pages-index-js-8ac26c27619a66f92da2.js.map