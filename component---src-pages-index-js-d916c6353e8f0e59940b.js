(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{173:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=(n(232),n(46)),a=n.n(o),c=n(8),s=n.n(c),u=n(204),h=.08,d=function(e){function t(t){var n;return(n=e.call(this,t)||this).onDocumentKeyDown=function(e){var t=n.keyHandler[e.code];t&&t(e)},n.animate=function(){requestAnimationFrame(n.animate),n.updateCameraPosition(),n.renderer.render(n.scene,n.camera)},n.updateCameraPosition=function(){n.cameraSpeedX*=1-h,n.cameraSpeedY*=1-h,n.cameraSpeedZ*=1-h,n.cameraPosX+=n.cameraSpeedX,n.cameraPosY+=n.cameraSpeedY,n.cameraPosZ+=n.cameraSpeedZ,n.camera.position.set(n.cameraPosX,n.cameraPosY,n.cameraPosZ)},n.onDocumentResize=function(){var e=window,t=e.innerWidth,i=e.innerHeight;n.renderer.setSize(t,i),n.camera.aspect=t/i,n.camera.updateProjectionMatrix()},n.canvasRef=Object(i.createRef)(),n.cameraPosX=0,n.cameraPosY=0,n.cameraPosZ=10,n.cameraSpeedX=0,n.cameraSpeedY=0,n.cameraSpeedZ=0,n.raycaster=new u.g,n.position=0,n.meshObjects=[],n.keyHandler={},n.swipeHandler=function(){},n}s()(t,e);var o=t.prototype;return o.componentDidMount=function(){document.body.style.overflow="hidden";var e=window,t=e.innerWidth,i=e.innerHeight;this.renderer=new u.l({canvas:this.canvasRef.current}),this.scene=new u.h,this.renderer.setSize(t,i);this.far=10,this.camera=new u.f(60,t/i,1,this.far),window.addEventListener("resize",this.onDocumentResize),document.addEventListener("keydown",this.onDocumentKeyDown);var r=n(234),o=new r(this.renderer.domElement);o.get("swipe").set({direction:r.DIRECTION_ALL}),o.on("swipe",this.swipeHandler),o.on("tap",this.tapHandler.bind(this))},o.tapHandler=function(e){var t=e.center,n=t.x,i=t.y,r=new u.j;r.x=n/this.renderer.domElement.clientWidth*2-1,r.y=-i/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(r,this.camera);var o=this.raycaster.intersectObjects(this.group.children);if(o.length>0)return this.handleObjectTapped(o[0].object),!0;this.checkDeviceEvents()},o.render=function(){return r.a.createElement("div",{id:"holder",style:{position:"relative"}},r.a.createElement("canvas",{style:{position:"absolute",zIndex:1},ref:this.canvasRef}))},t}(i.Component),l=n(184),p=n(177),f=10,m=3,v=function(){for(var e=[],t=0;t<2*Math.PI;t+=Math.PI/3){var n=new u.j(Math.cos(t),Math.sin(t));e.push(n)}return e}(),w=function(e,t){var n=f+m*Math.cos(t);return new u.k(n*Math.cos(e),m*Math.sin(t),n*Math.sin(e))},y=function(e,t,n,i){var r=new u.b;r.vertices.push(w(e,t));var o=[new u.j(.5,.5)];v.forEach(function(a){r.vertices.push(w(e+n*a.x,t+i*a.y)),o.push(new u.j(.5-.5*a.x,.5-.5*a.y))});for(var a=1;a<=6;a++){var c=new u.a(0,a,a+1);r.faces.push(c),r.faceVertexUvs[0].push([o[0],o[a],o[a+1]])}return r},P=(y(),function(e,t,n){var i=(new u.i).load(t);i.anisotropy=n.capabilities.getMaxAnisotropy();var r=new u.e({map:i});return new u.d(e,r)}),E=2*Math.PI,g=20,M=.05,x=.01,b=.005,T=50,D=40,j=E/(3*T),k=E/D;f=g,m=4;var I=function(e){function t(){var t;return(t=e.call(this)||this).swipeHandler=function(e){t.speedTheta+=.01*e.overallVelocityX,t.speedPhi-=.01*e.overallVelocityY},t.handlePosts=function(e){var n=.97*j,i=.97*k/Math.sin(Math.PI/3);e.forEach(function(e,r){var o=P(y(e.position.x,e.position.y,n,i),e.image,t.renderer);o.link=e.link,t.thetaGroup.add(o)})},t.setupTorus=function(){t.hexagonCoordMatrix=Object(l.b)(T,D),t.thetaGroup.position.z=-.95*g,t.phiGroup.add(t.thetaGroup),t.scene.add(t.phiGroup),p.a.Post.list().then(function(e){var n=e.data().layout;console.log({layout:n}),n.initialTheta&&(t.positionTheta=n.initialTheta),n.initialPhi&&(t.positionPhi=n.initialPhi);var i=e.data().items;t.handlePosts(i)}),t.animate()},t.handleObjectTapped=function(e){var t=e.link;document.location.href=t},t.updateCameraPosition=function(){t.speedTheta*=1-M,t.speedPhi*=1-M,t.positionPhi+=t.speedPhi,t.positionTheta+=t.speedTheta,t.thetaGroup.rotation.y=t.positionTheta,t.phiGroup.rotation.x=t.positionPhi},t.thetaGroup=new u.c,t.group=t.thetaGroup,t.phiGroup=new u.c,t.cameraPosZ=0,t.positionTheta=4.28,t.positionPhi=34.7,t.speedTheta=.005,t.speedPhi=0,t.keyHandler={ArrowRight:function(){return t.speedTheta-=b},ArrowLeft:function(){return t.speedTheta+=b},ArrowUp:function(){return t.speedPhi-=x},ArrowDown:function(){return t.speedPhi+=x},Space:function(){return console.log(t.positionTheta,t.positionPhi)}},window.Torus=a()(t),t}s()(t,e);var n=t.prototype;return n.handleMotionEvent=function(e){this.speedPhi+=.1*e.accelerationIncludingGravity.x},n.checkDeviceEvents=function(){var e=this;console.log("cde"),"function"==typeof DeviceMotionEvent.requestPermission&&DeviceMotionEvent.requestPermission().then(function(t){"granted"===t&&window.addEventListener("devicemotion",e.handleMotionEvent,!0)}).catch(console.error)},n.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.camera.position.set(this.cameraPosX,this.cameraPosY,this.cameraPosZ),this.setupTorus()},t}(d),G=function(){var e=Object(i.useState)(0),t=e[0],n=e[1],o=function(e){n(e.accelerationIncludingGravity.x),window.Torus&&(window.Torus.speedPhi+=.1*e.accelerationIncludingGravity.x)};return r.a.createElement("div",{style:{position:"absolute",zIndex:1e3}},r.a.createElement("button",{type:"button",onClick:function(){console.log("cde"),"function"==typeof DeviceMotionEvent.requestPermission&&DeviceMotionEvent.requestPermission().then(function(e){"granted"===e&&window.addEventListener("devicemotion",o,!0)}).catch(console.error)}},"track"),r.a.createElement("span",{style:{color:"#66f",marginLeft:10}},t))},S=function(){return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(I,null),r.a.createElement(G,null))},H=n(196);n(171),t.default=function(){return r.a.createElement("div",null,r.a.createElement(H.Helmet,null,r.a.createElement("title",null,"Joe's Web Page"),r.a.createElement("link",{rel:"apple-touch-icon",href:"/homescreen_icon.png"}),r.a.createElement("link",{rel:"icon",sizes:"192x192",href:"/android_icon.png"})),r.a.createElement(S,null))}},174:function(e,t,n){"use strict";var i=function(){function e(e,t){this.x=e,this.y=t}var t=e.prototype;return t.add=function(e){return this.x+=e.x,this.y+=e.y,this},t.scale=function(e){return this.x*=e,this.y*=e,this},e}();t.a=i},177:function(e,t,n){"use strict";var i=n(185),r=n.n(i),o=n(187),a=n.n(o);t.a=r()({clientId:"joes-blog",host:"",middleware:[a.a],resources:{Post:{list:{path:"/feed-1.json?z="+Math.random()}}}})},178:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=function(e,t,n){if(e==t)return 0;var i=t-e;if(e<t){var r=e+n-t;return i<r?i:-r}var o=t+n-e;return-i<o?i:o},r=function(e,t,n){var r=i(e.x,t.x,n.x),o=i(e.y,t.y,n.y),a=Math.sqrt(r*r+o*o);return{magnitude:a,direction:{x:r/a,y:o/a}}}},184:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});n(188),n(192);var i=n(178),r=n(174),o=function(e,t){for(var n=3*e,i=2*Math.PI/n,o=2*Math.PI/t,a=0,c=[],s=0;s<t;s++){c[s]=Array(e);for(var u=a%2==1?1.5*i:0,h=0;h<e;h++)c[s][h]=new r.a(u+3*h*i,s*o);a++}return c},a=function(e,t,n,o,a){var c=function(e,t){for(var n=[],i=0;i<t;i++){n[i]=Array(e);for(var r=0;r<e;r++)n[i][r]=null}return n}(o,a);e.forEach(function(e){var o=e.position,a={magnitude:Number.MAX_SAFE_INTEGER},s=null,u=null;n.forEach(function(e,n){e.forEach(function(e,r){if(!c[n][r]){var h=Object(i.a)(o,e,t);h.magnitude<a.magnitude&&(a=h,s=e,u={row:n,col:r})}})}),s&&(e.position=new r.a(s.x,s.y),c[u.row][u.col]=e)})}},186:function(e,t){}}]);
//# sourceMappingURL=component---src-pages-index-js-d916c6353e8f0e59940b.js.map