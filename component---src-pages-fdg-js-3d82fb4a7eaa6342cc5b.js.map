{"version":3,"sources":["webpack:///./src/pages/ForceDirectedGraphDemo/index.js","webpack:///./src/pages/fdg.js","webpack:///./src/lib/ForceDirectedGraph/Point2D.ts","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./src/lib/ForceDirectedGraph/ForceDirectedGraph.ts","webpack:///./node_modules/core-js/modules/_array-fill.js"],"names":["PALETTE","TWO_PI","Math","PI","ForceDirectedGraphDemo","setup","canvasRef","console","log","_this","canvas","ctx","getContext","fdg","ForceDirectedGraph","Point2D","items","i","push","id","tags","round","random","randomizePositions","prepareRelationshipMatrix","step","clearRect","placedItems","forEach","item","pos","position","x","y","scale","length","tag","beginPath","arc","fillStyle","fill","setTimeout","render","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","width","height","ref","this","Component","__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_ForceDirectedGraphDemo__WEBPACK_IMPORTED_MODULE_1__","Demo","add","point","factor","$export","P","areaSize","ACCELERATION_FACTOR","relationshipMatrix","forceOnItemFromSourceItem","targetItem","sourceItem","relationship","Error","totalForceOnItem","itemIndex","aggregateForce","placedItem","placedItemIndex","force","getInitialPlacement","initializePositions","map","Object","assign","moveItem","distance","count","getItemsRelationship","N","Array","j","bump","amount","toObject","toAbsoluteIndex","toLength","module","exports","value","O","aLen","arguments","index","undefined","end","endPos"],"mappings":"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","file":"component---src-pages-fdg-js-3d82fb4a7eaa6342cc5b.js","sourcesContent":["import React, { Component } from \"react\"\nimport ForceDirectedGraph from \"../../lib/ForceDirectedGraph/ForceDirectedGraph\"\nimport Point2D from \"../../lib/ForceDirectedGraph/Point2D\"\n\nconst PALETTE = [\"#a00\", \"#0a0\", \"#00a\", \"#990\", \"#099\", \"#909\", \"#555\"]\nconst TWO_PI = 2 * Math.PI\n\nclass ForceDirectedGraphDemo extends Component {\n  setup = canvasRef => {\n    console.log({ canvasRef })\n    this.canvas = canvasRef\n    this.ctx = canvasRef.getContext(\"2d\")\n\n    this.fdg = new ForceDirectedGraph(new Point2D(TWO_PI, TWO_PI))\n\n    const items = []\n\n    for (let i = 0; i < 200; i++) {\n      items.push({\n        id: i,\n        tags: [`${Math.round(6 * Math.random() * Math.random())}`],\n      })\n    }\n    for (let i = 0; i < 10; i++) {\n      items.push({\n        id: i,\n        tags: [`${i}`, `${(i + 1) % 8}`],\n      })\n    }\n\n    this.fdg.randomizePositions(items)\n    this.fdg.prepareRelationshipMatrix()\n\n    this.step()\n  }\n\n  step = () => {\n    this.fdg.step()\n\n    this.ctx.clearRect(0, 0, 500, 500)\n\n    this.fdg.placedItems.forEach(item => {\n      const pos = new Point2D(item.position.x, item.position.y)\n      pos.scale(500 / TWO_PI)\n\n      let step = TWO_PI / item.tags.length\n\n      item.tags.forEach((tag, i) => {\n        this.ctx.beginPath()\n        this.ctx.arc(pos.x, pos.y, 6, i * step, (i + 1) * step)\n        this.ctx.fillStyle = PALETTE[tag]\n        this.ctx.fill()\n      })\n    })\n    setTimeout(this.step, 50)\n  }\n\n  render() {\n    return <canvas width=\"500\" height=\"500\" ref={this.setup} />\n  }\n}\n\nexport default ForceDirectedGraphDemo\n","import React from \"react\"\nimport ForceDirectedGraphDemo from \"./ForceDirectedGraphDemo\"\n\nconst Demo = () => (\n  <div>\n    <ForceDirectedGraphDemo />\n  </div>\n)\n\nexport default Demo\n","class Point2D {\n  public x: number\n  public y: number\n\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n\n  public add(point: Point2D): Point2D {\n    this.x += point.x\n    this.y += point.y\n\n    return this\n  }\n\n  public scale(factor: number): Point2D {\n    this.x *= factor\n    this.y *= factor\n\n    return this\n  }\n}\n\nexport default Point2D\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","import { Item } from \"./types.d\"\nimport Point2D from \"./Point2D\"\n\nclass ForceDirectedGraph {\n  public areaSize: Point2D = null\n  public placedItems: Item[] = null\n  private ACCELERATION_FACTOR = null\n  private relationshipMatrix = [[]]\n\n  constructor(areaSize: Point2D, ACCELERATION_FACTOR: number = 0.0004) {\n    this.areaSize = areaSize\n    this.ACCELERATION_FACTOR = ACCELERATION_FACTOR\n  }\n\n  public forceOnItemFromSourceItem = (\n    targetItem: Item,\n    sourceItem: Item,\n    areaSize: Point2D,\n    relationship: object\n  ): Point2D => {\n    throw new Error(`forceOnItemFromSourceItem() not defined as (\n      targetItem: Item,\n      sourceItem: Item,\n      areaSize: Point2D,\n      relationship: object\n    ): Point2D`)\n  }\n\n  totalForceOnItem = (itemIndex: number): Point2D => {\n    const item = this.placedItems[itemIndex]\n    let aggregateForce = new Point2D(0, 0)\n\n    this.placedItems.forEach((placedItem, placedItemIndex) => {\n      if (placedItem.id === item.id) return\n\n      const force = this.forceOnItemFromSourceItem(\n        item,\n        placedItem,\n        this.areaSize,\n        this.relationshipMatrix[placedItemIndex][itemIndex]\n      )\n\n      aggregateForce.add(force)\n    })\n\n    return aggregateForce\n  }\n\n  public getInitialPlacement = (item: Item): Point2D =>\n    new Point2D(\n      this.areaSize.x * Math.random(),\n      this.areaSize.y * Math.random()\n    )\n\n  public initializePositions = (items: Item[]): void => {\n    this.placedItems = items.map((item: Item) => {\n      return {\n        ...item,\n        position: this.getInitialPlacement(item),\n      }\n    })\n  }\n\n  private moveItem = (item: Item, distance: Point2D): void => {\n    item.position.add(distance)\n    if (item.position.x < 0) {\n      item.position.x += this.areaSize.x\n    } else if (item.position.x > this.areaSize.x) {\n      item.position.x -= this.areaSize.x\n    }\n    if (item.position.y < 0) {\n      item.position.y += this.areaSize.y\n    } else if (item.position.y > this.areaSize.y) {\n      item.position.y -= this.areaSize.y\n    }\n  }\n\n  public step = (count: number = 1): void => {\n    for (let step = count; step > 0; step--) {\n      for (let i = this.placedItems.length - 1; i >= 0; i--) {\n        const force = this.totalForceOnItem(i)\n\n        this.moveItem(\n          this.placedItems[i],\n          force.scale(this.ACCELERATION_FACTOR)\n        )\n      }\n    }\n  }\n\n  public getItemsRelationship = (\n    sourceItem: Item,\n    targetItem: Item\n  ): object => {\n    throw \"getItemsRelationship must be defined as (sourceItem:Item, targetItem:Item):object\"\n  }\n\n  public prepareRelationshipMatrix = (): object[][] => {\n    const N = this.placedItems.length\n    const relationshipMatrix = Array(N)\n      .fill(0)\n      .map(() => Array(N).fill(0))\n\n    for (let i = 0; i < N; ++i) {\n      for (let j = 0; j < N; ++j) {\n        if (i == j) continue\n\n        const sourceItem = this.placedItems[i]\n        const targetItem = this.placedItems[j]\n\n        const relationship = this.getItemsRelationship(sourceItem, targetItem)\n\n        relationshipMatrix[i][j] = relationship\n        relationshipMatrix[j][i] = relationship\n      }\n    }\n\n    this.relationshipMatrix = relationshipMatrix\n    return relationshipMatrix\n  }\n\n  public bump = (amount: number): void => {\n    this.placedItems.forEach(item => {\n      item.position.x += amount * (Math.random() - 0.5)\n      item.position.y += amount * (Math.random() - 0.5)\n    })\n  }\n}\n\nexport default ForceDirectedGraph\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n"],"sourceRoot":""}